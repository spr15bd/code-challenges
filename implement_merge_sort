function mergeSort(array) {
  // Only change code below this line
  if (array.length === 1) {
    return array
  }
  let initialArrayLen = array.length
  let midIdx = 0
  let arrayLength = array.length
  let finalArray = []
  let newArray = []
  let newArray1 = []
  let newArray2 = []
  console.log("merge sort on ", array)
  
  if (arrayLength % 2 === 1) {
    midIdx = (arrayLength - 1) / 2
  } else {
    midIdx = arrayLength / 2
  }
  
  let array1 = array.slice(0,midIdx)
  console.log("array1: ", array1)
  let array2 = array.slice(midIdx)
  console.log("array2: ", array2)

  
  return merge(mergeSort(array1), mergeSort(array2))
  
  
  // Only change code above this line
}

function merge(array1, array2) {
  if (array1?.length < 1  || array2?.length < 1) return []
  console.log("merge: ", array1, " and ", array2)
  let mergedArray = []
  let lowest = 0
  array1 = array1.concat(array2)
  
  while (array1.length > 0) {
    array1.forEach((num, idx)=>{
    if (idx===0) {
      lowest = num
    } else {
      if (num<lowest) {
        lowest = num
      }
    }
  })
  mergedArray.push(lowest)
  console.log("mergedArray: ", mergedArray, ", removing element: ", array1.indexOf(lowest))
  array1.splice(array1.indexOf(lowest), 1)
  console.log("remaining to merge ", array1)
  }
  
}

mergeSort([37,25,46,87,99,150])
